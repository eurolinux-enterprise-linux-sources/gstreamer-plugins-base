diff --git a/gst/ffmpegcolorspace/gstffmpegcodecmap.c b/gst/ffmpegcolorspace/gstffmpegcodecmap.c
index 258090c..4d80df6 100644
--- a/gst/ffmpegcolorspace/gstffmpegcodecmap.c
+++ b/gst/ffmpegcolorspace/gstffmpegcodecmap.c
@@ -585,6 +585,7 @@ gst_ffmpeg_caps_to_pixfmt (const GstCaps * caps,
 {
   GstStructure *structure;
   const GValue *fps;
+  const gchar *matrix;
   gboolean ret;
 
   g_return_if_fail (gst_caps_get_size (caps) == 1);
@@ -659,6 +660,31 @@ gst_ffmpeg_caps_to_pixfmt (const GstCaps * caps,
           break;
       }
     }
+
+
+    /* Test color-matrix in here. If it's not set, or not set to 
+     * jpeg, assume we'll use the original scaled-range transforms.
+     * Buf for the jpeg case, try to switch over to the full-range
+     * transforms, if available.
+     */
+    matrix = gst_structure_get_string (structure, "color-matrix");
+    if ((matrix) && (strcmp (matrix, "jpeg") == 0)) {
+      switch (context->pix_fmt) {
+        case PIX_FMT_YUV420P:
+          context->pix_fmt = PIX_FMT_YUVJ420P;
+          break;
+        case PIX_FMT_YUV422P:
+          context->pix_fmt = PIX_FMT_YUVJ422P;
+          break;
+        case PIX_FMT_YUV444P:
+          context->pix_fmt = PIX_FMT_YUVJ444P;
+          break;
+        default:
+          context->pix_fmt = PIX_FMT_NB;
+          break;
+      }
+    }
+
   } else if (gst_structure_has_name (structure, "video/x-raw-rgb")) {
     gint bpp = 0, rmask = 0, endianness = 0, amask = 0, depth = 0;
 
diff --git a/gst/ffmpegcolorspace/gstffmpegcolorspace.c b/gst/ffmpegcolorspace/gstffmpegcolorspace.c
index 447fe91..b79da17 100644
--- a/gst/ffmpegcolorspace/gstffmpegcolorspace.c
+++ b/gst/ffmpegcolorspace/gstffmpegcolorspace.c
@@ -101,6 +101,7 @@ gst_ffmpegcsp_caps_remove_format_info (GstCaps * caps)
     gst_structure_remove_field (structure, "blue_mask");
     gst_structure_remove_field (structure, "alpha_mask");
     gst_structure_remove_field (structure, "palette_data");
+    gst_structure_remove_field (structure, "color-matrix");
   }
 
   gst_caps_do_simplify (caps);
